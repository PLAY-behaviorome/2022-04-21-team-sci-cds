---
title: "Play & Learning Across a Year (PLAY)"
author: "Rick Gilmore & Kasey Soska"
subtitle: "CDS 2022 BTS workshop"
date: "`r Sys.time()`"
output:
  ioslides_presentation:
    css: css/ioslides.css
    logo: img/PLAY-leaf.png 
    widescreen: true
    incremental: false
    transition: default
params:
  db_login: "email@university.com"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, 
                      message = FALSE,
                      fig.align = "center",
                      out.width = "800px")

library(tidyverse)
```

## Acknowledgements

- Support from NICHD, NIH OD, NIMH, NIDA, OBSSR, NSF
- Karen Adolph, Cathie Tamis-LeMonda, Orit Hertzberg, Tiger Teng

## Overview

- What is PLAY
- Why PLAY
- Challenges to face
- Challenges met
- Challenges yet-to-be-met
- A preview

# What is PLAY

<!-- Insert PLAY video from Databrary Board -->

---

- 1,000 mother-infant dyads (12-, 18-, 24-mos)
- 1 hr natural behavior (video)
- 5 min structured play (video)
- House tour (video)
- Parent-report questionnaires

---

- Foundational video coding passes
    - Speech \& language
    - Emotional expression
    - Object interaction
    - Locomotion \& physical activity
    
---

- Common, shared data
- Rigorous QA control
- But investigator-specific questions...
- Dataset as deliverable
- Catalyze/expand capacity to exploit video

# Why PLAY

## Natural behavior

## Big data developmental science

## Open science

- Full transparency
- Re-useability

# Challenges to face

## Sampling

- Age range(s)
- What language backgrounds...
- Where to sample...
- What to vary, what to keep constant...
- Is 'an hour in the life' representative?

# Challenges met

---

- Only English and Spanish
- Informed by Census demographics

# Challenges yet-to-be-met

---

- Findable, useable beyond launch group
- Limitations of Databrary 1.0
    - Virtual volumes?
- Versioning data, protocol, coding scheme
- Add-on, follow-up studies
    - New data
    - Augmented, new annotations
    
# A preview

## Databrary {.smaller}

<https://nyu.databrary.org/volume/444>

## 1-hour natural play {.smaller}

<https://nyu.databrary.org/slot/18825/78777000,82445800/asset/85849/download?inline=true>

## House walk-through {.smaller}

<https://nyu.databrary.org/slot/18825/69908000,70431136/asset/85853/download?inline=true>

## Structured play {.smaller}

<https://nyu.databrary.org/slot/18825/85767000,86228590/asset/85865/download?inline=true>

## Parent-report questionnaires {.smaller}

<https://nyu.databrary.org/slot/18825/82179000,85191864/asset/85867/download?inline=true>

## Load PLAY survey data

```
databraryapi::login_db("myemail@university.edu")
play_data <- databraryapi::read_csv_data_as_df(session_id = 51539, asset_id = 365016)
```

```{r, include=FALSE}
databraryapi::login_db(params$db_login)
play_data <- databraryapi::read_csv_data_as_df(session_id = 51539, asset_id = 365016)
```

## Demographics

````
xtabs(formula = ~ child_sex + age_group, data = play_data) %>%
  knitr::kable(., format = 'html') %>%
  kableExtra::kable_classic(.)
````

```{r}
xtabs(formula = ~ child_sex + age_group, data = play_data) %>%
  knitr::kable(., format = 'html') %>%
  kableExtra::kable_classic(.)
```

---

````
xtabs(formula = ~ child_race + child_ethnicity, data = play_data) %>%
  knitr::kable(., format = 'html') %>%
  kableExtra::kable_classic(.)
````

```{r}
xtabs(formula = ~ child_race + child_ethnicity, data = play_data) %>%
  knitr::kable(., format = 'html') %>%
  kableExtra::kable_classic(.)
```

## Locomotor milestones

```{r, echo=FALSE}
loco_feeding_data <- play_data %>%
  dplyr::select(
    .,
    age_group,
    child_sex,
    locomotor_milestones.who_walk.who_walk_onset_mo,
    locomotor_milestones.k_walk.k_walk_onset_mo,
    locomotor_milestones.crawl_onset.crawl_onset_mo,
    health.feeding_nutrition.solidfood_age,
    health.feeding_nutrition.breastfeed,
  ) %>%
  dplyr::rename(
    .,
    walk_mos_who = locomotor_milestones.who_walk.who_walk_onset_mo,
    walk_mos = locomotor_milestones.k_walk.k_walk_onset_mo,
    crawl_mos = locomotor_milestones.crawl_onset.crawl_onset_mo,
    solid_food_mos = health.feeding_nutrition.solidfood_age,
    breastfeed = health.feeding_nutrition.breastfeed
  )

crawl_walk_p <- loco_feeding_data %>%
  ggplot(.) +
  aes(walk_mos, crawl_mos, color = child_sex) +
  geom_smooth(method = "lm", aes(group = 1)) +
  geom_point() +
  theme(legend.position = "bottom") 

ggExtra::ggMarginal(
  crawl_walk_p,
  loco_feeding_data,
  walk_mos,
  crawl_mos,
  type = "density",
  margins = "both",
  groupColour = TRUE,
  groupFill = TRUE
)
```

## Feeding

```{r, echo=FALSE}
crawl_solid_p <- loco_feeding_data %>%
  ggplot(.) +
  aes(
    x = crawl_mos,
    y = solid_food_mos,
    color = child_sex
  ) +
  geom_point() +
  geom_smooth(method = "lm", aes(group = 1)) +
  theme(legend.position = "bottom") +
  coord_fixed()

ggExtra::ggMarginal(
  crawl_solid_p,
  loco_feeding_data,
  crawl_mos,
  solid_food_mos,
  type = "density",
  margins = "both",
  groupColour = TRUE,
  groupFill = TRUE
)
```

```{r}
databraryapi::logout_db()
```

```{r, child="splash.Rmd"}
```

```{r, child="resources.Rmd"}
```